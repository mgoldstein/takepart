From ba2eb9f8ed7f8c62c10af9238c3a3b6055ab0512 Mon Sep 17 00:00:00 2001
From: Fabian Franz <ffranz@trellon.com>
Date: Thu, 6 Dec 2012 00:22:08 +0000
Subject: [PATCH 2/2] Issue #11448: Fix problem that field conflicts could not be resolved.

---
 .../modules/contrib/features/features.export.inc   |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drupal/sites/all/modules/contrib/features/features.export.inc b/drupal/sites/all/modules/contrib/features/features.export.inc
index e7a690e..8c476f8 100644
--- a/drupal/sites/all/modules/contrib/features/features.export.inc
+++ b/drupal/sites/all/modules/contrib/features/features.export.inc
@@ -703,7 +703,10 @@ function features_get_default($component, $module_name = NULL, $alter = TRUE, $r
  * Get a map of components to their providing modules.
  */
 function features_get_default_map($component, $attribute = NULL, $callback = NULL, $reset = FALSE) {
-  static $map = array();
+  $map = &drupal_static(__FUNCTION__);
+  if (!isset($map)) {
+    $map = array();
+  }
   features_include();
   features_include_defaults($component);
   if ((!isset($map[$component]) || $reset) && $default_hook = features_get_default_hooks($component)) {
-- 
1.7.2.5

