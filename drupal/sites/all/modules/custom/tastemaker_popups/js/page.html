<!-- VIDPOP=TASTEMAKER -->
<script type="text/javascript">
  // Custom script for tastemakers video page

  (function ($) {
    // the number of rows and columns
    var numRows = 2;
    var numCols = 5;

    var videoData = new Array();        // configuration data

    for (row = 0; row < numRows; row++) {
      videoData[row] = new Array();
      for (col = 0; col < numCols; col++) {
        videoData[row][col] = new Array();
      }
    }


// Don't change anything above this block!

//  ***********************************************************************
//  *** Data for the video table
//  ***
//  *** Each line has 3 fields, separated by commas, indexed
//  *** by row (0-1) and columns (0-4):
//  ***
//  ***   1) the youtube id of the video
//  ***   2) the URL of the preview picture
//  ***   3) caption (for thumbnail caption or popup title)
//  ***   4) description (for popup description)
//
// Avoid using double quotes; if you must, precede them with a backslash, i.e. my \"quoted\" text

// first row
    videoData[0][0] = ["lvt4b_qwC_Q", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 1<br />Los Angeles Video #1", "This is description 1"];
    videoData[0][1] = ["I1583adUqSg", "http://www.takepart.com/sites/default/files/styles/tp_secondary_feature_thumbnail/public/10043476_0-1.jpg", "This is caption 2", "This is description 2"];
    videoData[0][2] = ["hu2WFQ9G5EE", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 3", "This is description 3"];
    videoData[0][3] = ["T7u0ghPuaEE", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 4", "This is description 4"];
    videoData[0][4] = ["C6K_GZsZ7hE", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 5", "This is description 5"];

// second row
    videoData[1][0] = ["9HPiBJBCOq8", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 6", "This is description 6"];
    videoData[1][1] = ["LQOXrMA4K0E", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 7", "This is description 7"];
    videoData[1][2] = ["9u07gqBqHc4", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 8", "This is description 8"];
    videoData[1][3] = ["jT6JkceQ9FU", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 9", "This is description 9"];
    videoData[1][4] = ["GlQ8dDJK0Ww", "http://www.takepart.com/sites/default/files/temp_video_thumb.png", "This is caption 10","This is description 10"];

//  ***********************************************************************

// Don't change anything below this block!


    var listeners = new Array();    // list of listeners for click events

// build the table from the data
    $(window).load(function() {
      var table = $('#video-popup-grid table.video-thumb-table');

      for (row = 0; row < numRows; row++) {
        var rc = 'r' + row;
        $(table).append('<tr class="' + rc + '"></tr>');
        for (col = 0; col < numCols; col++) {
          var cc = 'c' + col;

          // add listener for click
          (function(row_id, col_id, video_id) {  // <-- immediate function call
            if (Drupal.settings.takepart_browsercaps.detected_mobile_browser) {
              // using mobile; link directly to youtube
              listeners[row_id + '-' + col_id] = function () { window.location = 'http://www.youtube.com/embed/' +  video_id};
            }
            else {
              // desktop browser; use colorbox
              listeners[row_id + '-' + col_id] = function () { jQuery.fn.colorbox({width:"900px", height:"430px", inline:true, href:"#taste-details-" + row_id + '-' + col_id}); };
            }
          } (row, col, videoData[row][col][0])); // <-- immediate function call

          var rid = 'table tr.' + rc;
          $(rid).append('<td class="' + cc + '"></td>');

          (function(t_row, t_col, youtube_id, preview_img, caption, description) {  // <-- immediate function call
            var preview_img = '<img width="180" height="135" class="rtt-preview-img" src="' + preview_img + '" />';

            var cid = 'table tr.' + rc + ' td.' + cc;
            $(cid).append('<div class="inner"><div class="vid-thumbnail">' + preview_img + '<div class="vid-arrow"></div></div><div class="vid-caption">' + caption + '</div></div>');
            $(cid).click(function() {
              // alert('cid: ' + cid + ' t_row:' + t_row +  ' t_col:' + t_col);
              showTmVideo(t_row, t_col, youtube_id);
            });
          } (row, col, videoData[row][col][0], videoData[row][col][1], videoData[row][col][2], videoData[row][col][2])); // <-- immediate function call

          if (col < (numCols - 1)) {
            $(rid).append('<td class="spacer">&nbsp;</td>');
          }
        }
      }

      // hide the spinner
      $('#video-popup-grid .table-loading').hide();
    });

// click handler for video thumb
    function showTmVideo(r, c, val) {
      if (val != 0) {
        //alert('show  ' + r + '-' + c + '  val: ' + val);
        listeners[r + "-" + c]();
        jQuery.get("/tastemaker/video_details/" + val, function(data, video_id) {
          //alert('getting  ' + r + '::' + c + ' data: ' + data);
          jQuery("#taste-details-" + r + "-" + c + " .leftside .vidmap").html(data);
        });
      }
    }
  })(jQuery);
</script>

<!--
You can apply css overrides in the section below.
Main styles are in sites/all/modules/custom/tastemaker_popups/css/tastemaker_popups.css
-->
<style type="text/css">
</style>

<!--
This is the main HTML section; the table of thumbnails gets attached by the above javascript
-->
<div id="video-popup-grid"></table>
  <div class="intro">Enjoy these videos below they're all from Los Angeles these videos are from Los Angeles which shouldn't keep you from enjoying them even if you're not from Los Angeles.</div>
  <table class="video-thumb-table"></table>
  <div class="table-loading"></div>
</div>
