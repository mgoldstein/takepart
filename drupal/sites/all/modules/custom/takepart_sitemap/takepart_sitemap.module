<?php

/*
 * Exclude all awareness actions from sitemap 
 */

function takepart_sitemap_xmlsitemap_link_alter(&$link) {
    if ($link['type'] === "node" && $link['subtype'] === "action") {
        $linkparts = parse_url($link['loc']);
        if (!stripos($linkparts['host'], 'takepart.com')) {
            $link['status'] = 0;
            $link['status_default'] = 0;
        }
        if (stripos($linkparts['path'], 'user_actions')) {
            $link['status'] = 0;
            $link['status_default'] = 0;
        }
        if (stripos($linkparts['host'], 'takeaction.takepart.com') && stripos($linkparts['path'], 'local')) {
            $link['status'] = 0;
            $link['status_default'] = 0;
        }
    }
    return $link;
}