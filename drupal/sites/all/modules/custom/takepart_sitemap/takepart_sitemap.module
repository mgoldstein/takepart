<?php
/*
 * The action content type must be set to excluded. This function processes all
 * actions, excluding awareness actions from the sitemap
 */
/*
function takepart_sitemap_xmlsitemap_link_alter($link) {
    dd($link);
}
 */

/*
function takepart_sitemap_xmlsitemap_index_links($limit) {
  $nids = db_query_range("SELECT n.nid FROM {node} n LEFT JOIN {xmlsitemap} x ON x.type = 'node' AND x.subtype = 'action' AND n.nid = x.id WHERE n.type = 'action' ORDER BY n.nid DESC", 0, $limit)->fetchCol();
   
  $nodes = node_load_multiple($nids);
  drupal_debug($nodes);
  $i = 0;
  foreach ($nodes as $node) {
  $tid = NULL;
  foreach(field_get_items('node', $node, 'field_action_type') as $delta => $item) {
    $tid = $item['tid'];
  }

  if (!is_null($tid) && $tid != 107717) {
      $link = xmlsitemap_node_create_link($node);
      $link['status'] = 1;
      $link['status_override'] = 1;
      xmlsitemap_link_save($link);
      $i++;
    }
  }
  drupal_debug($i);
}
*/
/*
function takepart_sitemap_cron() {
  takepart_sitemap_xmlsitemap_index_links(xmlsitemap_var('batch_limit'));
}
*/