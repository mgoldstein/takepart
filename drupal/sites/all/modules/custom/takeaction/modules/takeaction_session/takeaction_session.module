<?php
/**
 * @file
 * TakeAction Button User Session Module
 */

/**
 * Implements hook_user_login().
 */
function takeaction_session_user_login(&$edit, $account) {
  // Set the cookie.
  $cookie = variable_get('takeaction_session_cookie_name', 'TAKEACTIONSESSION');
  $lifespan = variable_get('takeaction_session_cookie_lifespan', 60 * 60 * 24 * 30);
  $expire = empty($lifespan) ? 0 : time() + $lifespan;
  $path = variable_get('takeaction_session_cookie_path', '/');
  $domain = variable_get('takeaction_session_cookie_domain', '.takepart.com');
  $guid = takeaction_tracking_get_guid();
  setcookie($cookie, $guid, $expire, $path, $domain);
}

/**
 * Implements hook_user_logout().
 */
function takeaction_session_user_logout($account) {
  // Delete the cookie.
  $cookie = variable_get('takeaction_session_cookie_name', 'TAKEACTIONSESSION');
  $path = variable_get('takeaction_session_cookie_path', '/');
  $domain = variable_get('takeaction_session_cookie_domain', '.takepart.com');
  setcookie($cookie, FALSE, time() - (60 * 60 * 24), $path, $domain);
}
