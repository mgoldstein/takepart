//
// Homepage Specific Styles
//

body.front{
  img {
    max-width: 100% !important;
    height: auto !important;
  }

  #sidebar{
    .block-title{
      @include header-top-border();
    }
  }
}


//
// Homepage Featured Area
//
.panel-takepart-homepage {

  // Layout
  .panel-panel {
    @include clearfix();
  }

  .panel-secondary-featured,
  .panel-tpl-secondary-featured {
    .panel-pane {
      @include breakpoint($breakpoint-tablet) {
        float: left;
        width: 48.5596708%;
        &:nth-child(2n+1) {
          margin-right: 2.7806584%;
          clear: left;
        }
      }
    }
  }

  // Content

  // Image vertical alignments make it easier to overlay text
  // with negative margins in the main feature
  .field-name-field-article-main-image img {
    vertical-align: bottom;
  }

  .node-title {
    a {
      color: black;
    }
    // TODO Hover States
  }

  .panel-main-featured .pane-node {
    .pane-title {
      position: relative;
      background-color: white;
      margin: -1em .5em 1px;
      padding: .5em .5em 0;
      font-size: 2em;
      line-height: 1.333333333;
      font-weight: normal;
    }
    .pane-title.no-overlap {
      margin: 0em .5em 1px;
    }

    .field-name-field-article-subhead {
      font-size: 1em;
      line-height: 1.285714286; // 18px / 14px
      font-weight: normal;
    }

    .byline {
      margin: 0 2em 1em;
    }

    .entry-content {
      margin: 0 2em 1em;
      border-bottom: 1px solid $gray-line;

      .field {
        margin-bottom: .7em;
      }
      .field-name-field-tab-action-override {
        .field-item {
          position: relative;
          padding-left: 1.5em;
          margin-bottom: 1em;

          &:before {
            content: "\23E9";
            font-family: "SSGizmo";
            line-height: 1.75;
            color: $mint;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
          }

          a {
            color: black;

            &:before {
              content: "take action:\0020";
              font-family: $main-brand-font;
              font-weight: normal;
            }
            &:hover,
            &:active {
              color: $light-mint;
            }
          }
        }
      }
    }
  }

  .node.view-mode-feature-secondary {
    .node-title {
      font-size: 1.142857143em;
      line-height: 1.25;
      margin-top: .5em;
      font-weight: normal;
    }
    &.node-openpublish-photo-gallery{
      h2.node-title{
        &:after{
          font-family: "SSGizmo";
          font-size: 1.25em;
          line-height: 0.8;
          vertical-align: text-bottom;
          content: " \1F4F7";
        }
      }
    }
    &.node-video{
      h2.node-title{
        &:after{
          font-family: "SSGizmo";
          font-size: 1.25em;
          line-height: 0.8;
          vertical-align: text-bottom;
          content: " \1F4F9";
        }
      }
    }
    margin-bottom: 1em;
  }
  .view-mode-feature-main-tpl {
    .field-name-field-article-subhead {
      font-size: 1.142857143em;
      line-height: 1.25;
      margin-top: .5em;
      font-weight: normal;
    }
    &.node-openpublish-photo-gallery{
      h2.field-name-field-article-subhead{
        &:after{
          font-family: "SSGizmo";
          font-size: 1.25em;
          line-height: 0.8;
          vertical-align: text-bottom;
          content: " \1F4F7";
        }
      }
    }
    &.node-video{
      h2.field-name-field-article-subhead{
        &:after{
          font-family: "SSGizmo";
          font-size: 1.25em;
          line-height: 0.8;
          vertical-align: text-bottom;
          content: " \1F4F9";
        }
      }
    }
    margin-bottom: 1em;
  }

  .tpl-headline {
    border-top: 4px solid $light-blue;
    margin: 0 0 1em;
    padding: 0;
    height: 45px;
    @include breakpoint($breakpoint-desktop) {
      height: 18px;
    }

    .tpl-title,
    .tpl-time {
      display: block;
      height: 30px;
      margin: 0 auto;
      background: transparent none scroll no-repeat top left;
      @include breakpoint($breakpoint-desktop) {
        display: inline-block;
        float: none;
        margin: 0 0 0 0;
      }
    }
    .tpl-title {
      width: 167px;
      background-image: image-url("tpl-title.jpg");
      margin-top: 5px;
      margin-bottom: -10px;
      @include breakpoint($breakpoint-desktop) {
        margin-bottom: 0px;
      }
    }
    .tpl-time {
      width: 100%;
      max-width: 312px;
      background-size: 100%;
      background-image: image-url("tpl-time.jpg");
      margin-top: 5px;
    }
  }
} // .panel-takepart-homepage

.date {
  margin-bottom: 2px;
  @include breakpoint($breakpoint-mobile) {
    display: none;
  }
  @include breakpoint($breakpoint-desktop) {
    display: block;
    float: left;
    font-family: $primary-sans-font;
    color: $dark-gray;
    font-size: 13px;
  }
  @include breakpoint($breakpoint-desktop) {
    float: right;
  }
  &.extra-margin {
    margin-top: 1.5em;
  }
}
//
// Latest Headlines
//
.latest-headlines{
  .views-row{
    line-height: 1.4em;
    font-size: 14px;
    padding-top: 3px;
    @include blue-square-bullets;
    .openpublish_photo_gallery:after{
      font-family: "SSGizmo";
      font-size: 1.25em;
      line-height: 0.8em;
      vertical-align: text-bottom;
      content: " \1F4F7";
    }
    .video:after{
      font-family: "SSGizmo";
      font-size: 1.25em;
      line-height: 0.8;
      vertical-align: text-bottom;
      content: " \1F4F9";
    }
  }
  a{
    height: 100%;
  }
}

//Center Column
a.column-header:hover{
  text-decoration: none;
}
#skinny {

  .columns > .view-content {
    @include breakpoint-grid-breakdown(1 3 1, $breakpoint-mobile $breakpoint-tablet $breakpoint-desktop, ' > .views-row');
  }
  .columns{
    text-align: center;
    a:hover {
      text-decoration: none;
    }
    a {
      .field-content:hover{
        text-decoration: underline;
      }
    }
    .author {
      padding: 4px 0 1px;
    }
    > .view-content {
      > .views-row {
      	&:after {
      	  content: '';
      	  display: block;
      	  height: 0;
      	  width: 76px;
      	  margin: 1em auto 1.5em;
      	  border-bottom: dotted 2px $light-gray;
      	}
        &:hover{

          .column-title{
            text-decoration: none;
          }
          .author{
            text-decoration: none;
          }
          .views-field-field-promo-headline{
            text-decoration: underline;
          }
        }
      	&:last-child:after {
      	  border-bottom: none;
      	}
      	@include breakpoint($breakpoint-tablet) {
      	  padding-left: 30px;
      	  padding-right: 30px;
      	  &:after {
      	    display: none;
      	  }
      	}
      	@include breakpoint($breakpoint-desktop) {
      	  &:after {
      	    display: block;
      	  }
      	}
      } // > .view-row
      @include breakpoint($breakpoint-tablet) {
        .views-row{
          display: none;
        }
        .views-row:nth-child(1), .views-row:nth-child(2), .views-row:nth-child(3) {
          display: block;
        }
      }
      @include breakpoint($breakpoint-desktop) {
        .views-row{
          display: block;
        }
      }

    } // > .view-content
  } // .columns
  #block-views-homepage-columns-block, #block-views-takeaction-homepage-block{
    .block-title{
      font-size: 12px;
      color: #fff;
      background-color: #0080a3;
      border-bottom: 20px;
      -webkit-border-radius: 0px 0px 37px 37px;
      border-radius: 0px 0px 37px 37px;
      width: 74px;
      height: 37px;
      margin: 0 auto;
      text-align: center;
      margin-bottom: 20px;
      behavior: $pie-behavior;
    }
    .line{
      @include breakpoint($breakpoint-mobile) {
        border-bottom: 1px solid $blue;
        margin: 0;
      }
      @include breakpoint($breakpoint-desktop) {
        margin: 0 13px;
      }

    }
    .views-field-field-profile-photo{
      .field-content{
        border: 1px solid #eee;
        -webkit-border-radius: 50px;
        border-radius: 50px;
        width: 50px;
        height: 50px;
        overflow: hidden;
	margin: 0 auto 5px;
      }
    }
  }
  //Take Action overrides
  #block-views-takeaction-homepage-block{
    .block-title{
      background-color: $light-mint;
      line-height: 100%;
      font-family: $secondary-sans-font;
      font-size: 13px;
      letter-spacing: .4px;
      vertical-align: bottom;
      padding-top: 4px;
      @include box-sizing(border-box);
      height: 38px;
    }
    .line{
      border-bottom: 1px solid $light-mint;
    }
    .action-type{
      font: bold 14px/18px $primary-sans-font;
      text-transform: uppercase;
      padding-bottom: 2px;
    }
    .tab-call-to-action{
      margin-bottom: 10px;
    }
    .action-icon{
      display: inline-block;
    }
    .action-url{
      display: inline-block;
      margin-top: 2px;
      margin-left: 5px;
      vertical-align: top;
      a{
        color: $mint;
      }
    }
    a.more{
      text-align: left;
      display: block;
      @include breakpoint($breakpoint-mobile) {
      }
      @include breakpoint($breakpoint-tablet) {
        margin-top: 25px;
      }
      @include breakpoint($breakpoint-desktop) {
        margin-top: 0;
      }
      &:hover{
        text-decoration: underline;
      }
    }
    .views-row{
      &:hover{
        text-decoration: none;
        .action-url{
          text-decoration: underline;
        }
      }
    }
  }


}

/*
 *Photo Galleries
 */
#block-views-photo-galleries-promo-block{
  font: 100 1.142857143em/1.25 $primary-serif-font;
  .views-row{
    margin-bottom: 20px;
    .views-field-field-promo-headline {
      .field-content {
            @include icon-photo-gallery();
      }
    }
  }
  .view-footer {
    font-size: .875em;
    line-height: 1.5;
  }
  .block-title{
    margin-bottom: 8px;
  }
}
/*
 *Promo "don't miss"
 */
 .promo{
    margin-top: 20px;
    @include breakpoint($breakpoint-mobile) {
      text-align: left;
      .inner{
        text-align: center;
        label{
          display: block;
          margin-right: 10px;
          font-family: $main-brand-font;
          line-height: 28px;
          font-weight: bold;
        }
        a.text:hover{
          text-decoration: underline;
        }
        .text{
          display: block;
          font: italic 20px $primary-serif-font;
          img{
            display: block;
            vertical-align: middle;
            margin: 0 auto;
            margin-bottom: 10px;
          }
        }
      }
    }
    @include breakpoint($breakpoint-tablet) {
      .inner{
        text-align: left;
        display: inline-block;
        label{
          display: inline-block;
        }
        .text{
          display: inline-block;
          img{
            display: inline-block;
            margin-bottom: 0;
            margin-right: 10px;
          }
        }
      }
    }
    @include breakpoint($breakpoint-desktop) {
      text-align: center;
      .inner{
        .text{
            vertical-align: middle;
          img{
            vertical-align: middle;
            padding-bottom: 3px;
          }
        }
      }
    }
 }
/*
 *Graveyard
 */
.graveyard {
  padding-top: 25px;
  border-top: 1px solid $gray-line;
  @include breakpoint-grid-breakdown(1 4, $breakpoint-mobile $breakpoint-tablet, '.topic');
  .topic{
    margin-bottom: 25px;
    .topic-title{
      font: bold 12px $primary-sans-font;
      margin-bottom: 5px;
      text-transform: uppercase;
    }
  }
}

    .megaphone{
      display: block;
      margin: 0 auto;
      width: 33px;
      height: 23px;
      background: image-url('megaphone.jpg') no-repeat;
      padding-bottom: 5px;
    }

#div-gpt-ad-1376947900543-0 {
  margin: 0 auto;
}
a.cta {
  display: block;
  width: 100%;
  background-color: $light-blue;
  font-size: 14px;
  font-family: $primary-sans-font;
  font-weight: 500;
  padding: 3px 0;
  text-align: center;
  position: relative;
  color: #fff;
  span{
    position: relative;
    padding-left: 20px;
    &:before{
      font-family: "SSGizmo";
      color: #fff;
      content: '\23E9';
      position: absolute;
      top: 3px;
      left: 0;
    }
  }
  margin-bottom: 10px;
  @include breakpoint($breakpoint-tablet) {
    margin-bottom: 0;
  }

}
