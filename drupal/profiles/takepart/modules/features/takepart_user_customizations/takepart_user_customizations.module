<?php
/**
 * @file
 * Code for the TakePart User Customizations feature.
 */

include_once('takepart_user_customizations.features.inc');

/**
 * user_profile_form
 * hook_form_alter for user_profile form.
 * Add in link for unsubscribe, make into button later.
 * 
 */
function takepart_user_customizations_form_user_profile_form_alter(&$form, &$form_state, $form_id) {
  $form['unsubscribe_link'] = array(
    '#markup' => l('Unsubscribe from all TakePart emails', 'http://action.takepart.com/page/unsubscribe'),
    '#weight' => 100,
  );
  unset($form['actions']['cancel']);
  
  $form['actions']['cancel_profile'] = array(
    '#type' => 'button',
    '#value' => t('Cancel'),
    '#attributes' => array('onclick' => 'history.go(-1); return false;')
  );
}

function takepart_user_customizations_menu_alter(&$items) {
  $items['user/%user/edit']['type'] = MENU_NORMAL_ITEM;
  unset($items['user/%user/bookmarks']);
  unset($items['user/%user/content_lock']);
}