<?php

function contextual_add_current_form_menu_edit_item_alter(&$form, $form_state) {
  if(isset($_GET['link_title'])) {
    $form['link_title']['#default_value'] = $_GET['link_title'];
  }
  if(isset($_GET['link_path'])) {
    $form['link_path']['#default_value'] = $_GET['link_path'];
  }
}

function contextual_add_current_contextual_links_view_alter(&$elements, $links) {
  if(isset($elements['#links']['menu-list'])) {
    $elements['#links']['menu-add-current'] = array(
      'title' => 'Add Current Page',
      'href' => str_replace("list", "add", $elements['#links']['menu-list']['href']),
      'query' => array(
        'link_title' => drupal_get_title(),
        'link_path' => $_GET['q'],
      ) + $elements['#links']['menu-list']['query'],
    );
  }
}

function contextual_add_current_menu_alter(&$items) {
  $items['admin/structure/menu/manage/%menu/add']['context'] = $item['/admin/structure/menu/manage/%menu/add']['context'] | MENU_CONTEXT_INLINE;
}
