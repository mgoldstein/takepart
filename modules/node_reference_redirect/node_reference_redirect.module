<?php
/*
 * I want this to be part of http://drupal.org/project/cck_redirection new d7 version
 * But for now it is own module
 */
/*
 * implements hook_field_formatter_info
 */
function node_reference_redirect_field_formatter_info() {
  return array(
    'rediect' => array(
      'label' => t('Redirect'), 
      'field types' => array('node_reference'),
    ), 
  );
}

/*
 * implements hook_field_formatter_view
 *
 * If we have a node reference and we can redirect to it lets do it!
 */
function node_reference_redirect_field_formatter_view($entity_type, $entity, $field, $instance, $langcode, $items, $display) {  

  $current_field = $entity->{$instance['field_name']};
  if(!empty($current_field) &&
     !empty($current_field[$langcode])) {
    $nid = $current_field[$langcode][0]['nid'];
    $path = "node/$nid";
    if(drupal_lookup_path($path)) {
      drupal_goto($path);
    }

  }
}


